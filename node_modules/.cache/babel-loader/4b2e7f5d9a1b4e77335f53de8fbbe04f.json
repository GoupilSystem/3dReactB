{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\3dHoverBis\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { forwardRef, useRef, useState, useImperativeHandle } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { SimplexNoise } from 'three/examples/jsm/math/SimplexNoise';\nconst CameraShake = /*#__PURE__*/forwardRef(({\n  intensity = 1,\n  decay,\n  decayRate = 0.65,\n  maxYaw = 0.1,\n  maxPitch = 0.1,\n  maxRoll = 0.1,\n  yawFrequency = 1,\n  pitchFrequency = 1,\n  rollFrequency = 1,\n  additive\n}, ref) => {\n  const _useThree = useThree(),\n        camera = _useThree.camera;\n\n  const intensityRef = useRef(intensity);\n\n  const _useState = useState(() => new SimplexNoise()),\n        _useState2 = _slicedToArray(_useState, 1),\n        yawNoise = _useState2[0];\n\n  const _useState3 = useState(() => new SimplexNoise()),\n        _useState4 = _slicedToArray(_useState3, 1),\n        pitchNoise = _useState4[0];\n\n  const _useState5 = useState(() => new SimplexNoise()),\n        _useState6 = _slicedToArray(_useState5, 1),\n        rollNoise = _useState6[0];\n\n  const constrainIntensity = () => {\n    if (intensityRef.current < 0 || intensityRef.current > 1) {\n      intensityRef.current = intensityRef.current < 0 ? 0 : 1;\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    getIntensity: () => intensityRef.current,\n    setIntensity: val => {\n      intensityRef.current = val;\n      constrainIntensity();\n    }\n  }), []);\n  useFrame(({\n    clock\n  }, delta) => {\n    const shake = Math.pow(intensityRef.current, 2);\n    const yaw = maxYaw * shake * yawNoise.noise(clock.elapsedTime * yawFrequency, 1);\n    const pitch = maxPitch * shake * pitchNoise.noise(clock.elapsedTime * pitchFrequency, 1);\n    const roll = maxRoll * shake * rollNoise.noise(clock.elapsedTime * rollFrequency, 1);\n\n    if (additive) {\n      camera.rotation.x += pitch;\n      camera.rotation.y += yaw;\n      camera.rotation.z += roll;\n    } else {\n      camera.rotation.set(pitch, yaw, roll);\n    }\n\n    if (decay && intensityRef.current > 0) {\n      intensityRef.current -= decayRate * delta;\n      constrainIntensity();\n    }\n  });\n  return null;\n});\nexport { CameraShake };","map":null,"metadata":{},"sourceType":"module"}