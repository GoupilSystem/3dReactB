{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\3dHoverBis\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\3dHoverBis\\\\src\\\\carPart.js\";\nimport * as THREE from 'three';\nimport React, { useState, useRef } from 'react';\nimport { useLoader, useFrame } from 'react-three-fiber';\nimport usePromise from \"react-promise-suspense\";\nimport { HTML, OrbitControls } from \"drei\";\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nexport function CarPart({\n  time,\n  index,\n  color,\n  description,\n  options\n}) {\n  const gltf = useLoader(GLTFLoader, '/carrito.gltf');\n  const ref = useRef();\n  const defaultMaterial = new THREE.MeshPhysicalMaterial({\n    color: color,\n    roughness: 0.8\n  });\n  const hoverMaterial = new THREE.MeshPhysicalMaterial({\n    color: 0xcc0000,\n    roughness: 0.1\n  });\n\n  const Model = () => {\n    const _useState = useState(false),\n          _useState2 = _slicedToArray(_useState, 2),\n          hovered = _useState2[0],\n          setHover = _useState2[1];\n\n    const hover = e => e.stopPropagation() && setHover(true);\n\n    const unhover = e => e.stopPropagation() && setHover(false);\n\n    const _useState3 = useState(false),\n          _useState4 = _slicedToArray(_useState3, 2),\n          clicked = _useState4[0],\n          setClicked = _useState4[1]; // In here it could load textures, images, triangulate textgeometry, etc\n    // The line below produces a fake load, emulating loading assets/set-up processing\n\n\n    usePromise(ms => new Promise(res => setTimeout(res, ms)), [time]); // React will bail out until the suspense is lifted, then it renders the view\n\n    return /*#__PURE__*/React.createElement(\"mesh\", {\n      onClick: () => setClicked(!clicked),\n      onPointerOver: hover,\n      onPointerOut: unhover,\n      material: hovered ? hoverMaterial : defaultMaterial,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"bufferGeometry\", Object.assign({\n      attach: \"geometry\"\n    }, gltf.__$[index].geometry, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(HTML, {\n      scaleFactor: 10,\n      style: {\n        pointerEvents: \"none\",\n        display: hovered ? \"block\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        pointerEvents: \"all\"\n      },\n      onClick: e => {\n        e.stopPropagation();\n        e.nativeEvent.stopImmediatePropagation();\n        e.nativeEvent.stopPropagation();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, !clicked && description, clicked && /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, options.map(item => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 50\n        }\n      }, \" \", item.value, \" \");\n    }))))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    scale: [1, 1, 1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Model, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/scarleti/Desktop/Cyril/React/3dHoverBis/src/carPart.js"],"names":["THREE","React","useState","useRef","useLoader","useFrame","usePromise","HTML","OrbitControls","GLTFLoader","CarPart","time","index","color","description","options","gltf","ref","defaultMaterial","MeshPhysicalMaterial","roughness","hoverMaterial","Model","hovered","setHover","hover","e","stopPropagation","unhover","clicked","setClicked","ms","Promise","res","setTimeout","__$","geometry","pointerEvents","display","nativeEvent","stopImmediatePropagation","map","item","id","value"],"mappings":"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","sourcesContent":["import * as THREE from 'three'\r\nimport React, { useState, useRef } from 'react'\r\nimport { useLoader, useFrame } from 'react-three-fiber'\r\nimport usePromise from \"react-promise-suspense\"\r\nimport { HTML, OrbitControls } from \"drei\"\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\n\r\nexport function CarPart({ time, index, color, description, options }) {\r\n  const gltf = useLoader(GLTFLoader, '/carrito.gltf')\r\n  const ref = useRef()\r\n\r\n  const defaultMaterial = new THREE.MeshPhysicalMaterial({\r\n    color: color,\r\n    roughness: 0.8\r\n  })\r\n  const hoverMaterial = new THREE.MeshPhysicalMaterial({\r\n    color: 0xcc0000,\r\n    roughness: 0.1\r\n  })\r\n\r\n  const Model = () => {\r\n    const [hovered, setHover] = useState(false)\r\n    const hover = e => e.stopPropagation() && setHover(true)\r\n    const unhover = e => e.stopPropagation() && setHover(false)\r\n    const [clicked, setClicked] = useState(false);\r\n    \r\n    // In here it could load textures, images, triangulate textgeometry, etc\r\n    // The line below produces a fake load, emulating loading assets/set-up processing\r\n    usePromise(ms => new Promise(res => setTimeout(res, ms)), [time])\r\n    // React will bail out until the suspense is lifted, then it renders the view\r\n  \r\n    return (\r\n      <mesh\r\n        onClick={() => setClicked(!clicked)}\r\n        onPointerOver={hover}\r\n        onPointerOut={unhover}\r\n        material={hovered ? hoverMaterial : defaultMaterial}>\r\n        <bufferGeometry attach=\"geometry\" {...gltf.__$[index].geometry} />\r\n        <HTML scaleFactor={10} style={{ pointerEvents: \"none\", display: hovered ? \"block\" : \"none\" }}>\r\n          <div className=\"content\">\r\n            <button\r\n              style={{ pointerEvents: \"all\" }}\r\n              onClick={e => {\r\n                e.stopPropagation()\r\n                e.nativeEvent.stopImmediatePropagation()\r\n                e.nativeEvent.stopPropagation()\r\n              }}>\r\n              {!clicked && description}\r\n              {clicked && \r\n                <ul>\r\n                  { options.map(item => { return <li key={item.id}> {item.value} </li> }) }\r\n              </ul>\r\n              }\r\n            </button>\r\n          </div>\r\n        </HTML>\r\n      </mesh>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <group ref={ref}>\r\n      <group scale={[1, 1, 1]}>\r\n        <Model />\r\n      </group>\r\n    </group>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}