{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\3dHoverBis\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useRef, useState, useMemo, createElement } from 'react';\nimport { WebGLCubeRenderTarget, LinearFilter, RGBFormat } from 'three';\nimport { useThree, useFrame } from 'react-three-fiber';\n\nfunction CubeCamera(_ref) {\n  let children = _ref.children,\n      fog = _ref.fog,\n      _ref$frames = _ref.frames,\n      frames = _ref$frames === void 0 ? Infinity : _ref$frames,\n      _ref$resolution = _ref.resolution,\n      resolution = _ref$resolution === void 0 ? 256 : _ref$resolution,\n      _ref$near = _ref.near,\n      near = _ref$near === void 0 ? 1 : _ref$near,\n      _ref$far = _ref.far,\n      far = _ref$far === void 0 ? 1000 : _ref$far,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"fog\", \"frames\", \"resolution\", \"near\", \"far\"]);\n\n  const ref = useRef();\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        camera = _useState2[0],\n        setCamera = _useState2[1];\n\n  const _useThree = useThree(),\n        scene = _useThree.scene,\n        gl = _useThree.gl;\n\n  const fbo = useMemo(() => new WebGLCubeRenderTarget(resolution, {\n    minFilter: LinearFilter,\n    magFilter: LinearFilter,\n    format: RGBFormat,\n    encoding: gl.outputEncoding\n  }), [resolution]);\n  let count = 0;\n  useFrame(() => {\n    if (camera && ref.current && (frames === Infinity || count < frames)) {\n      ref.current.traverse(obj => obj.visible = false);\n      const originalFog = scene.fog;\n      scene.fog = fog != null ? fog : originalFog;\n      camera.update(gl, scene);\n      scene.fog = originalFog;\n      ref.current.traverse(obj => obj.visible = true);\n      count++;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", props, /*#__PURE__*/createElement(\"cubeCamera\", {\n    ref: setCamera,\n    args: [near, far, fbo]\n  }), /*#__PURE__*/createElement(\"group\", {\n    ref: ref\n  }, children(fbo.texture)));\n}\n\nexport { CubeCamera };","map":null,"metadata":{},"sourceType":"module"}