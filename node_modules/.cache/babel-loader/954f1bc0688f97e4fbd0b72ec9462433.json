{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\3dHoverBis\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { AnimationMixer } from 'three';\nimport { useFrame } from 'react-three-fiber';\n\nfunction useAnimations(clips, root) {\n  const ref = useRef();\n  const actualRef = root ? root : ref;\n\n  const _useState = useState(() => new AnimationMixer(undefined)),\n        _useState2 = _slicedToArray(_useState, 1),\n        mixer = _useState2[0];\n\n  const api = useMemo(() => ({\n    ref: actualRef,\n    clips,\n    actions: clips.reduce((prev, clip) => _extends({}, prev, {\n      [clip.name]: null\n    }), {}),\n    names: clips.map(clip => clip.name),\n    mixer\n  }), [clips, mixer, actualRef]);\n  useFrame((state, delta) => mixer.update(delta));\n  useEffect(() => {\n    const currentRoot = actualRef.current;\n\n    if (currentRoot) {\n      clips.forEach(clip => api.actions[clip.name] = mixer.clipAction(clip, currentRoot));\n    }\n\n    return () => Object.values(api.actions).forEach(action => {\n      if (currentRoot) {\n        mixer.uncacheAction(action, currentRoot);\n      }\n    });\n  }, [api, clips, mixer, root, actualRef]);\n  return api;\n}\n\nexport { useAnimations };","map":null,"metadata":{},"sourceType":"module"}