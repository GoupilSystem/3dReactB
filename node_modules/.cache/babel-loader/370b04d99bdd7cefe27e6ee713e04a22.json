{"ast":null,"code":"import { useLayoutEffect } from 'react';\nimport { useThree } from 'react-three-fiber';\n\nfunction Preload({\n  all,\n  scene,\n  camera\n}) {\n  const _useThree = useThree(),\n        gl = _useThree.gl,\n        dScene = _useThree.scene,\n        dCamera = _useThree.camera; // Layout effect because it must run before React commits\n\n\n  useLayoutEffect(() => {\n    const invisible = [];\n\n    if (all) {\n      (scene || dScene).traverse(object => {\n        if (object.visible === false) {\n          invisible.push(object);\n          object.visible = true;\n        }\n      });\n    } // Now compile the scene\n\n\n    gl.compile(scene || dScene, camera || dCamera); // Flips these objects back\n\n    invisible.forEach(object => object.visible = false); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return null;\n}\n\nexport { Preload };","map":null,"metadata":{},"sourceType":"module"}